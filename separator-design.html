<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Separator Design Calculator</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Additional custom styles for separator design calculator */
        .kpi-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .kpi-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--primary-color);
        }
        
        .kpi-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .good { color: var(--success-color); }
        .fair { color: var(--warning-color); }
        .poor { color: var(--danger-color); }
        
        .chart-container {
            height: 400px;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }
        
        .recommendations {
            background: #fff9e6;
            border-left: 5px solid var(--warning-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .design-summary {
            background: #f0f8ff;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .results-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        /* Splash Screen Styles */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
            opacity: 1;
            transition: opacity 1s ease-out;
        }
        
        .splash-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .splash-screen h1 {
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 600;
            text-align: center;
        }
        
        .splash-screen p {
            font-size: 18px;
            font-style: italic;
            text-align: center;
        }
        
        .splash-screen .loader {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-top: 30px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Print Header and Footer */
        .print-header {
            display: none;
        }
        
        .print-footer {
            display: none;
        }
        
        @media print {
            @page {
                size: A4;
                margin: 0.75in;
            }
            
            .print-header, .print-footer {
                display: block;
                position: fixed;
                left: 0;
                right: 0;
                background: white;
                z-index: 100;
                padding: 10px 0.75in;
            }
            
            .print-header {
                top: 0;
                height: 70px;
                border-bottom: 2px solid var(--primary-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-size: 10pt;
            }
            
            .print-footer {
                bottom: 0;
                height: 30px;
                border-top: 1px solid var(--border-color);
                text-align: center;
                font-size: 9pt;
                color: var(--text-secondary);
                line-height: 30px;
            }
            
            body {
                padding-top: 80px;
                padding-bottom: 40px;
                font-size: 12pt;
            }
            
            .no-print {
                display: none !important;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid var(--border-color);
                page-break-inside: avoid;
            }
            
            .chart-container {
                page-break-inside: avoid;
            }
        }
        
        /* Custom styles for this calculator */
        .developer-info {
            background: var(--gradient-primary);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        
        .developer-info h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .developer-info p {
            margin: 5px 0;
            font-size: 14px;
        }
        
        .design-parameters {
            background: #e8f4f8;
            border-left: 5px solid #007acc;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div>
            <h1 data-en="Loading Calculator... Please Wait" data-ar="جاري تحميل الحاسبة... يرجى الانتظار">Loading Calculator... Please Wait</h1>
            <p data-en="We are preparing everything for you ⚡" data-ar="نحن نعد كل شيء لك ⚡">We are preparing everything for you ⚡</p>
            <p data-en="Developed by: Mr. Fadi M. Darwesh" data-ar="تطوير: السيد فادي م. درويش">Developed by: Mr. Fadi M. Darwesh</p>
            <p data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</p>
            <p data-en="asrar.cement@gmail.com" data-ar="asrar.cement@gmail.com">asrar.cement@gmail.com</p>
            <div class="loader"></div>
        </div>
    </div>

    <!-- Print Header -->
    <div class="print-header">
        <div>
            <strong data-en="Separator Design Calculator" data-ar="حاسبة تصميم مصنفات الأسمنت">Separator Design Calculator</strong>
        </div>
        <div>
            <strong data-en="Design Report" data-ar="تقرير التصميم">Design Report</strong>
        </div>
    </div>

    <!-- Print Footer -->
    <div class="print-footer">
        <span data-en="Mr. Fadi M. Darwesh - QC & R&D Specialist - asrar.cement@gmail.com" data-ar="السيد فادي م. درويش - أخصائي ضمان الجودة والبحوث والتطوير - asrar.cement@gmail.com">Mr. Fadi M. Darwesh - QC & R&D Specialist - asrar.cement@gmail.com</span>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header no-print">
            <div class="header-content">
                <div class="logo">
                    <h1 data-en="Separator Design Calculator" data-ar="حاسبة تصميم مصنفات الأسمنت">Separator Design Calculator</h1>
                </div>
                <div class="header-controls">
                    <div class="language-switch">
                        <button class="lang-btn active" id="lang-en">English</button>
                        <button class="lang-btn" id="lang-ar">العربية</button>
                    </div>
                </div>
            </div>
        <a href="index.html" class="back-btn" style="position: fixed; top: 20px; right: 20px; background: var(--secondary); color: white; padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s; z-index: 100;"><i class="fas fa-arrow-right"></i>العودة للرئيسية</a>
</header>

        <div class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h2 data-en="Advanced Separator Design Calculator" data-ar="حاسبة تصميم المصنفات المتقدمة">Advanced Separator Design Calculator</h2>
                    <p data-en="Comprehensive design tool for cement separator system using engineering principles and industry standards" data-ar="أداة تصميم شاملة لأنظمة مصنفات الأسمنت باستخدام المبادئ الهندسية ومعايير الصناعة">Comprehensive design tool for cement separator system using engineering principles and industry standards</p>
                </div>
            </section>

            <!-- Company & Report Information -->
            <div class="card">
                <h2 class="section-title" data-en="Project Information" data-ar="معلومات المشروع">Project Information</h2>
                <div class="grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="project-name" data-en="Project Name" data-ar="اسم المشروع">Project Name</label>
                        <input type="text" id="project-name" placeholder="Enter project name">
                    </div>
                    <div class="input-group">
                        <label for="design-date" data-en="Design Date" data-ar="تاريخ التصميم">Design Date</label>
                        <input type="date" id="design-date">
                    </div>
                    <div class="input-group">
                        <label for="designer-name" data-en="Designed By" data-ar="المصمم">Designed By</label>
                        <input type="text" id="designer-name" placeholder="Enter designer name">
                    </div>
                    <div class="input-group">
                        <label for="designer-position" data-en="Designer Position" data-ar="منصب المصمم">Designer Position</label>
                        <input type="text" id="designer-position" placeholder="Enter designer position">
                    </div>
                    <div class="input-group">
                        <label for="plant-capacity" data-en="Plant Capacity (tph)" data-ar="سعة المصنع (طن/ساعة)">Plant Capacity (tph)</label>
                        <input type="number" id="plant-capacity" placeholder="e.g., 200">
                    </div>
                    <div class="input-group">
                        <label for="separator-location" data-en="Separator Location" data-ar="مكان المصنف">Separator Location</label>
                        <select id="separator-location">
                            <option value="1st-chamber" data-en="1st Chamber" data-ar="الحجرة الأولى">1st Chamber</option>
                            <option value="2nd-chamber" data-en="2nd Chamber" data-ar="الحجرة الثانية">2nd Chamber</option>
                            <option value="final-product" data-ar="المنتج النهائي">Final Product</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Separator Design Parameters -->
            <div class="card">
                <h2 class="section-title" data-en="Separator Design Parameters" data-ar="معاملات تصميم المصنف">Separator Design Parameters</h2>
                <div class="grid-3" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="separator-diameter" data-en="Separator Diameter (m)" data-ar="قطر المصنف (متر)">Separator Diameter (m)</label>
                        <input type="number" step="0.1" id="separator-diameter" placeholder="Enter diameter">
                    </div>
                    <div class="input-group">
                        <label for="separator-height" data-en="Separator Height (m)" data-ar="ارتفاع المصنف (متر)">Separator Height (m)</label>
                        <input type="number" step="0.1" id="separator-height" placeholder="Enter height">
                    </div>
                    <div class="input-group">
                        <label for="blade-configuration" data-en="Blade Configuration" data-ar="تكوين الشفرات">Blade Configuration</label>
                        <select id="blade-configuration">
                            <option value="" data-en="Select Configuration" data-ar="اختر التكوين">Select Configuration</option>
                            <option value="forward-curved" data-en="Forward Curved" data-ar="منحنية للأمام">Forward Curved</option>
                            <option value="backward-curved" data-en="Backward Curved" data-ar="منحنية للخلف">Backward Curved</option>
                            <option value="radial" data-en="Radial" data-ar="شعاعية">Radial</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="air-flow-rate" data-en="Air Flow Rate (m³/h)" data-ar="معدل تدفق الهواء (م³/ساعة)">Air Flow Rate (m³/h)</label>
                        <input type="number" step="100" id="air-flow-rate" placeholder="Enter air flow">
                    </div>
                    <div class="input-group">
                        <label for="cut-size" data-en="Cut Size (d50) (μm)" data-ar="حجم القطع (d50) (ميكرومتر)">Cut Size (d50) (μm)</label>
                        <input type="number" step="0.1" id="cut-size" placeholder="Enter cut size">
                    </div>
                    <div class="input-group">
                        <label for="separation-efficiency" data-en="Separation Efficiency (%)" data-ar="كفاءة الفصل (%)">Separation Efficiency (%)</label>
                        <input type="number" step="0.1" id="separation-efficiency" placeholder="Enter efficiency">
                    </div>
                </div>
            </div>

            <!-- Target Settings -->
            <div class="card">
                <h2 class="section-title" data-en="Target Settings" data-ar="الإعدادات المستهدفة">Target Settings</h2>
                <div class="grid-3" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="target-cut-size" data-en="Target Cut Size (μm)" data-ar="حجم القطع المستهدف (ميكرومتر)">Target Cut Size (μm)</label>
                        <input type="number" step="0.1" id="target-cut-size" value="30">
                    </div>
                    <div class="input-group">
                        <label for="target-efficiency" data-en="Target Efficiency (%)" data-ar="الكفاءة المستهدفة (%)">Target Efficiency (%)</label>
                        <input type="number" step="0.1" id="target-efficiency" value="85">
                    </div>
                    <div class="input-group">
                        <label for="pressure-drop-target" data-en="Pressure Drop Target (Pa)" data-ar="هدف انخفاض الضغط (باسكال)">Pressure Drop Target (Pa)</label>
                        <input type="number" step="10" id="pressure-drop-target" value="1500">
                    </div>
                </div>
            </div>

            <!-- Design Specifications Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Design Specifications" data-ar="مواصفات التصميم">Design Specifications</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Parameter" data-ar="المعامل">Parameter</th>
                            <th data-en="Value" data-ar="القيمة">Value</th>
                            <th data-en="Unit" data-ar="الوحدة">Unit</th>
                            <th data-en="Status" data-ar="الحالة">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Separator Volume" data-ar="حجم المصنف">Separator Volume</td>
                            <td id="sep-volume">-</td>
                            <td>m³</td>
                            <td id="sep-volume-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Air-to-Material Ratio" data-ar="نسبة الهواء إلى المادة">Air-to-Material Ratio</td>
                            <td id="air-material-ratio">-</td>
                            <td>m³/kg</td>
                            <td id="air-material-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Rotor Speed" data-ar="سرعة الدوار">Rotor Speed</td>
                            <td id="rotor-speed">-</td>
                            <td>RPM</td>
                            <td id="rotor-speed-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Residence Time" data-ar="وقت الإقامة">Residence Time</td>
                            <td id="residence-time">-</td>
                            <td>seconds</td>
                            <td id="residence-time-status">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Operating Parameters Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Operating Parameters" data-ar="معاملات التشغيل">Operating Parameters</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Parameter" data-ar="المعامل">Parameter</th>
                            <th data-en="Design Value" data-ar="قيمة التصميم">Design Value</th>
                            <th data-en="Operating Range" data-ar="نطاق التشغيل">Operating Range</th>
                            <th data-en="Control Method" data-ar="طريقة التحكم">Control Method</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Air Flow Rate" data-ar="معدل تدفق الهواء">Air Flow Rate</td>
                            <td id="design-air-flow">-</td>
                            <td data-en="±10%" data-ar="±10%">±10%</td>
                            <td data-en="Variable Frequency Drive" data-ar="محرك تردد متغير">Variable Frequency Drive</td>
                        </tr>
                        <tr>
                            <td data-en="Rotor Speed" data-ar="سرعة الدوار">Rotor Speed</td>
                            <td id="design-rotor-speed">-</td>
                            <td data-en="±5%" data-ar="±5%">±5%</td>
                            <td data-en="Inverter Control" data-ar="تحكم العاكس">Inverter Control</td>
                        </tr>
                        <tr>
                            <td data-en="Feed Rate" data-ar="معدل التغذية">Feed Rate</td>
                            <td id="design-feed-rate">-</td>
                            <td data-en="±15%" data-ar="±15%">±15%</td>
                            <td data-en="Weigh Feeder" data-ar="ميزان التغذية">Weigh Feeder</td>
                        </tr>
                        <tr>
                            <td data-en="Inlet Pressure" data-ar="ضغط الدخول">Inlet Pressure</td>
                            <td id="design-inlet-pressure">-</td>
                            <td data-en="±50 Pa" data-ar="±50 باسكال">±50 Pa</td>
                            <td data-en="Fan Speed Control" data-ar="تحكم سرعة المروحة">Fan Speed Control</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Performance Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Performance Data" data-ar="بيانات الأداء">Performance Data</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Performance Metric" data-ar="مقياس الأداء">Performance Metric</th>
                            <th data-en="Design Target" data-ar="هدف التصميم">Design Target</th>
                            <th data-en="Calculated" data-ar="المُحسب">Calculated</th>
                            <th data-en="Deviation" data-ar="الانحراف">Deviation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Separation Efficiency" data-ar="كفاءة الفصل">Separation Efficiency</td>
                            <td id="target-sep-eff">-</td>
                            <td id="calc-sep-eff">-</td>
                            <td id="dev-sep-eff">-</td>
                        </tr>
                        <tr>
                            <td data-en="Cut Size (d50)" data-ar="حجم القطع (d50)">Cut Size (d50)</td>
                            <td id="target-d50">-</td>
                            <td id="calc-d50">-</td>
                            <td id="dev-d50">-</td>
                        </tr>
                        <tr>
                            <td data-en="Pressure Drop" data-ar="انخفاض الضغط">Pressure Drop</td>
                            <td id="target-pressure">-</td>
                            <td id="calc-pressure">-</td>
                            <td id="dev-pressure">-</td>
                        </tr>
                        <tr>
                            <td data-en="Bypass Factor" data-ar="عامل التجاوز">Bypass Factor</td>
                            <td data-en="< 15%" data-ar="< 15%">< 15%</td>
                            <td id="calc-bypass">-</td>
                            <td id="dev-bypass">-</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="button-group">
                    <button class="btn btn-primary" id="calculate-design-btn" data-en="Calculate Design" data-ar="حساب التصميم">Calculate Design</button>
                    <button class="btn btn-secondary" id="optimize-design-btn" data-en="Optimize Design" data-ar="تحسين التصميم">Optimize Design</button>
                    <button class="btn btn-success" id="save-design-btn" data-en="Save Design" data-ar="حفظ التصميم">Save Design</button>
                    <button class="btn btn-warning" id="export-design-btn" data-en="Export Design" data-ar="تصدير التصميم">Export Design</button>
                </div>
            </div>

            <!-- Additional Notes -->
            <div class="card">
                <h2 class="section-title" data-en="Design Notes" data-ar="ملاحظات التصميم">Design Notes</h2>
                <div class="input-group">
                    <label for="design-notes" data-en="Add your design notes and specifications:" data-ar="أضف ملاحظاتك ومواصفات التصميم:">Add your design notes and specifications:</label>
                    <textarea id="design-notes" rows="4" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; font-family: var(--font-arabic);" placeholder="Enter design notes, material specifications, safety considerations..."></textarea>
                </div>
                <small style="color: var(--text-secondary);" data-en="These notes will be included in the design report" data-ar="ستظهر هذه الملاحظات في تقرير التصميم">These notes will be included in the design report</small>
            </div>
            
            <!-- Results Section -->
            <div class="results-section" id="results-section">
                <div class="card">
                    <h2 class="section-title" data-en="Separator Design Results" data-ar="نتائج تصميم المصنف">Separator Design Results</h2>
                    
                    <div class="grid-4" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- KPI Cards -->
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Separation Efficiency" data-ar="كفاءة الفصل">Separation Efficiency</div>
                            <div class="kpi-value" id="efficiency-kpi">-</div>
                            <div class="kpi-label" id="efficiency-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Cut Size (d50)" data-ar="حجم القطع (d50)">Cut Size (d50)</div>
                            <div class="kpi-value" id="cutsize-kpi">-</div>
                            <div class="kpi-label" id="cutsize-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Bypass Factor" data-ar="عامل التجاوز">Bypass Factor</div>
                            <div class="kpi-value" id="bypass-kpi">-</div>
                            <div class="kpi-label" id="bypass-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Pressure Drop" data-ar="انخفاض الضغط">Pressure Drop</div>
                            <div class="kpi-value" id="pressure-kpi">-</div>
                            <div class="kpi-label" id="pressure-status">-</div>
                        </div>
                    </div>
                    
                    <!-- Charts -->
                    <div class="chart-container">
                        <canvas id="efficiency-chart"></canvas>
                    </div>
                    
                    <!-- Design Summary -->
                    <div class="design-summary">
                        <h3 class="section-heading" data-en="Design Summary" data-ar="ملخص التصميم">Design Summary</h3>
                        <div id="design-summary-content">
                            <p data-en="Design calculation completed. Review the results above." data-ar="تم إكمال حسابات التصميم. راجع النتائج أعلاه.">Design calculation completed. Review the results above.</p>
                        </div>
                    </div>
                    
                    <!-- Recommendations -->
                    <div class="recommendations">
                        <h3 class="section-heading" data-en="Design Recommendations" data-ar="توصيات التصميم">Design Recommendations</h3>
                        <div id="design-recommendations-content"></div>
                    </div>
                    
                    <div class="button-group no-print">
                        <button class="btn btn-success" id="print-design-report" data-en="Print Design Report" data-ar="طباعة تقرير التصميم">Print Design Report</button>
                        <button class="btn btn-warning" id="export-pdf-design" data-ar="تصدير كـ PDF" data-en="Export as PDF">Export as PDF</button>
                        <button class="btn btn-secondary" id="new-design" data-en="New Design" data-ar="تصميم جديد">New Design</button>
                    </div>
                </div>
            </div>

            <!-- Developer Information -->
            <div class="developer-info no-print">
                <h3 data-en="System Developer" data-ar="مطور النظام">System Developer</h3>
                <p><strong data-en="Mr. Fadi M. Darwesh" data-ar="السيد فادي م. درويش">Mr. Fadi M. Darwesh</strong></p>
                <p data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</p>
                <p>asrar.cement@gmail.com</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer no-print">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 data-en="Separator Design Calculator" data-ar="حاسبة تصميم مصنفات الأسمنت">Separator Design Calculator</h4>
                    <p data-en="Advanced design tools for cement separator system engineering" data-ar="أدوات تصميم متقدمة لهندسة أنظمة مصنفات الأسمنت">Advanced design tools for cement separator system engineering</p>
                </div>
                <div class="footer-section">
                    <h4 data-en="Developer" data-ar="المطور">Developer</h4>
                    <ul>
                        <li>Mr. Fadi M. Darwesh</li>
                        <li data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</li>
                        <li>asrar.cement@gmail.com</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-en="Features" data-ar="المميزات">Features</h4>
                    <ul>
                        <li data-en="Separator Sizing" data-ar="أبعاد المصنف">Separator Sizing</li>
                        <li data-en="Performance Prediction" data-ar="توقع الأداء">Performance Prediction</li>
                        <li data-en="Design Optimization" data-ar="تحسين التصميم">Design Optimization</li>
                        <li data-en="Engineering Reports" data-ar="التقارير الهندسية">Engineering Reports</li>
                    </ul>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--gray-700);">
                <p data-en="© 2025 Separator Design Calculator System. All rights reserved." data-ar="© 2025 نظام حاسبة تصميم المصنف. جميع الحقوق محفوظة.">© 2025 Separator Design Calculator System. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <i class="fas fa-cog"></i>
            <p data-en="Calculating Design..." data-ar="جاري حساب التصميم...">Calculating Design...</p>
        </div>
    </div>

    <script>
        // Language switching functionality
        document.getElementById('lang-en').addEventListener('click', function() {
            setLanguage('en');
        });
        
        document.getElementById('lang-ar').addEventListener('click', function() {
            setLanguage('ar');
        });
        
        function setLanguage(lang) {
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Update text content based on data attributes
            document.querySelectorAll('[data-en]').forEach(element => {
                if (lang === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-ar');
                }
            });
            
            // Update placeholders
            document.querySelectorAll('input[placeholder], textarea[placeholder]').forEach(element => {
                const enText = element.getAttribute('data-en-placeholder');
                const arText = element.getAttribute('data-ar-placeholder');
                
                if (enText && arText) {
                    element.placeholder = lang === 'en' ? enText : arText;
                }
            });
            
            // Update direction
            document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        }
        
        // Initialize with English
        setLanguage('en');
        
        // Initialize splash screen
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('splash-screen').classList.add('hidden');
            }, 2000);
            
            // Set current date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('design-date').value = today;
        });

        function setStatusIndicator(metric, value, target, lowerIsBetter = false) {
            const statusElement = document.getElementById(`${metric}-status`);
            let status, statusClass;
            
            if (value === null || typeof value === 'undefined' || isNaN(value)) {
                statusElement.textContent = 'N/A';
                statusElement.className = 'kpi-label';
                return;
            }

            const deviation = Math.abs(value - target) / target * 100;
            
            if (deviation <= 5) {
                status = 'Good';
                statusClass = 'good';
            } else if (deviation <= 10) {
                status = 'Fair';
                statusClass = 'fair';
            } else {
                status = 'Poor';
                statusClass = 'poor';
            }
            
            statusElement.textContent = status;
            statusElement.className = 'kpi-label ' + statusClass;
        }

        // Calculate design
        document.getElementById('calculate-design-btn').addEventListener('click', function() {
            calculateDesign();
        });

        function calculateDesign() {
            // Get input values
            const diameter = parseFloat(document.getElementById('separator-diameter').value);
            const height = parseFloat(document.getElementById('separator-height').value);
            const airFlow = parseFloat(document.getElementById('air-flow-rate').value);
            const plantCapacity = parseFloat(document.getElementById('plant-capacity').value);
            const cutSize = parseFloat(document.getElementById('cut-size').value);
            
            if (isNaN(diameter) || isNaN(height) || isNaN(airFlow) || isNaN(plantCapacity)) {
                alert('Please enter all required design parameters!');
                return;
            }
            
            // Show loading
            document.getElementById('loading-overlay').classList.remove('hidden');
            
            // Simulate calculation delay
            setTimeout(() => {
                const results = performDesignCalculations(diameter, height, airFlow, plantCapacity, cutSize);
                
                document.getElementById('loading-overlay').classList.add('hidden');
                displayDesignResults(results);
                document.getElementById('results-section').style.display = 'block';
            }, 1000);
        }

        function performDesignCalculations(diameter, height, airFlow, plantCapacity, cutSize) {
            // Separator Volume
            const separatorVolume = Math.PI * Math.pow(diameter/2, 2) * height;
            
            // Air-to-material ratio
            const airToMaterialRatio = airFlow / (plantCapacity * 1000); // Convert tph to kg/h
            
            // Rotor speed calculation (simplified)
            const rotorSpeed = Math.max(50, Math.min(300, 150 + (cutSize - 30) * 5));
            
            // Residence time
            const residenceTime = separatorVolume / (airFlow / 3600);
            
            // Pressure drop calculation
            const pressureDrop = airFlow * 0.005 + Math.pow(airFlow / 10000, 2);
            
            // Separation efficiency (based on cut size and other factors)
            const efficiency = Math.max(70, Math.min(95, 95 - (cutSize - 25) * 0.8));
            
            // Bypass factor
            const bypassFactor = Math.max(5, Math.min(20, 20 - efficiency * 0.15));
            
            // Operating parameters
            const designAirFlow = airFlow;
            const designRotorSpeed = rotorSpeed;
            const designFeedRate = plantCapacity;
            const designInletPressure = pressureDrop + 100;
            
            return {
                separatorVolume,
                airToMaterialRatio,
                rotorSpeed,
                residenceTime,
                pressureDrop,
                efficiency,
                bypassFactor,
                designAirFlow,
                designRotorSpeed,
                designFeedRate,
                designInletPressure,
                cutSize,
                diameter,
                height
            };
        }

        function displayDesignResults(results) {
            // Update KPI cards
            document.getElementById('efficiency-kpi').textContent = results.efficiency.toFixed(1) + '%';
            document.getElementById('cutsize-kpi').textContent = results.cutSize.toFixed(1) + ' μm';
            document.getElementById('bypass-kpi').textContent = results.bypassFactor.toFixed(1) + '%';
            document.getElementById('pressure-kpi').textContent = Math.round(results.pressureDrop) + ' Pa';
            
            // Set status indicators
            const targetEff = parseFloat(document.getElementById('target-efficiency').value) || 85;
            const targetCut = parseFloat(document.getElementById('target-cut-size').value) || 30;
            const targetPressure = parseFloat(document.getElementById('pressure-drop-target').value) || 1500;
            
            setStatusIndicator('efficiency', results.efficiency, targetEff);
            setStatusIndicator('cutsize', results.cutSize, targetCut, true);
            setStatusIndicator('pressure', results.pressureDrop, targetPressure);
            setStatusIndicator('bypass', results.bypassFactor, 15, true);
            
            // Update data tables
            document.getElementById('sep-volume').textContent = results.separatorVolume.toFixed(2);
            document.getElementById('air-material-ratio').textContent = results.airToMaterialRatio.toFixed(3);
            document.getElementById('rotor-speed').textContent = Math.round(results.rotorSpeed);
            document.getElementById('residence-time').textContent = results.residenceTime.toFixed(1);
            
            document.getElementById('design-air-flow').textContent = Math.round(results.designAirFlow).toLocaleString();
            document.getElementById('design-rotor-speed').textContent = Math.round(results.designRotorSpeed);
            document.getElementById('design-feed-rate').textContent = results.designFeedRate.toFixed(1);
            document.getElementById('design-inlet-pressure').textContent = Math.round(results.designInletPressure) + ' Pa';
            
            document.getElementById('target-sep-eff').textContent = targetEff + '%';
            document.getElementById('calc-sep-eff').textContent = results.efficiency.toFixed(1) + '%';
            document.getElementById('dev-sep-eff').textContent = ((results.efficiency - targetEff) / targetEff * 100).toFixed(1) + '%';
            
            document.getElementById('target-d50').textContent = targetCut + ' μm';
            document.getElementById('calc-d50').textContent = results.cutSize.toFixed(1) + ' μm';
            document.getElementById('dev-d50').textContent = ((results.cutSize - targetCut) / targetCut * 100).toFixed(1) + '%';
            
            document.getElementById('target-pressure').textContent = targetPressure + ' Pa';
            document.getElementById('calc-pressure').textContent = Math.round(results.pressureDrop) + ' Pa';
            document.getElementById('dev-pressure').textContent = ((results.pressureDrop - targetPressure) / targetPressure * 100).toFixed(1) + '%';
            
            document.getElementById('calc-bypass').textContent = results.bypassFactor.toFixed(1) + '%';
            document.getElementById('dev-bypass').textContent = results.bypassFactor < 15 ? 'Within limit' : 'Above limit';
            
            generateEfficiencyChart(results);
            generateDesignSummary(results);
            generateDesignRecommendations(results);
        }

        function generateEfficiencyChart(results) {
            const ctx = document.getElementById('efficiency-chart').getContext('2d');
            
            if (window.efficiencyChart) {
                window.efficiencyChart.destroy();
            }
            
            // Generate particle size data
            const particleSizes = [];
            const efficiencies = [];
            for (let size = 5; size <= 100; size += 5) {
                particleSizes.push(size);
                // Efficiency curve based on cut size
                const eff = 100 / (1 + Math.exp((size - results.cutSize) / 5));
                efficiencies.push(eff);
            }
            
            window.efficiencyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: particleSizes,
                    datasets: [{
                        label: 'Separation Efficiency',
                        data: efficiencies,
                        borderColor: 'rgba(37, 99, 235, 1)',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Particle Size (μm)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Separation Efficiency (%)'
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Separation Efficiency vs Particle Size'
                        }
                    }
                }
            });
        }

        function generateDesignSummary(results) {
            let summary = '';
            
            summary += `<p data-en="• Separator diameter: ${results.diameter} m with height: ${results.height} m" data-ar="• قطر المصنف: ${results.diameter} م مع ارتفاع: ${results.height} م">• Separator diameter: ${results.diameter} m with height: ${results.height} m</p>`;
            summary += `<p data-en="• Calculated volume: ${results.separatorVolume.toFixed(2)} m³" data-ar="• الحجم المُحسب: ${results.separatorVolume.toFixed(2)} م³">• Calculated volume: ${results.separatorVolume.toFixed(2)} m³</p>`;
            summary += `<p data-en="• Air-to-material ratio: ${results.airToMaterialRatio.toFixed(3)} m³/kg" data-ar="• نسبة الهواء إلى المادة: ${results.airToMaterialRatio.toFixed(3)} م³/كيلوجرام">• Air-to-material ratio: ${results.airToMaterialRatio.toFixed(3)} m³/kg</p>`;
            summary += `<p data-en="• Designed rotor speed: ${Math.round(results.rotorSpeed)} RPM" data-ar="• سرعة الدوار المُصممة: ${Math.round(results.rotorSpeed)} دورة/دقيقة">• Designed rotor speed: ${Math.round(results.rotorSpeed)} RPM</p>`;
            summary += `<p data-en="• Expected residence time: ${results.residenceTime.toFixed(1)} seconds" data-ar="• وقت الإقامة المتوقع: ${results.residenceTime.toFixed(1)} ثانية">• Expected residence time: ${results.residenceTime.toFixed(1)} seconds</p>`;
            summary += `<p data-en="• Calculated pressure drop: ${Math.round(results.pressureDrop)} Pa" data-ar="• انخفاض الضغط المُحسب: ${Math.round(results.pressureDrop)} باسكال">• Calculated pressure drop: ${Math.round(results.pressureDrop)} Pa</p>`;
            
            document.getElementById('design-summary-content').innerHTML = summary;
        }

        function generateDesignRecommendations(results) {
            let recommendations = '';
            
            const targetEff = parseFloat(document.getElementById('target-efficiency').value) || 85;
            const targetCut = parseFloat(document.getElementById('target-cut-size').value) || 30;
            const targetPressure = parseFloat(document.getElementById('pressure-drop-target').value) || 1500;
            
            if (results.efficiency < targetEff - 5) {
                recommendations += `<p data-en="• Separation efficiency is below target. Consider increasing rotor speed or optimizing blade configuration." data-ar="• كفاءة الفصل أقل من الهدف. فكر في زيادة سرعة الدوار أو تحسين تكوين الشفرات.">• Separation efficiency is below target. Consider increasing rotor speed or optimizing blade configuration.</p>`;
            }
            
            if (results.cutSize > targetCut * 1.1) {
                recommendations += `<p data-en="• Cut size is larger than target. Reduce rotor speed or adjust air flow rate." data-ar="• حجم القطع أكبر من الهدف. قلل سرعة الدوار أو اضبط معدل تدفق الهواء.">• Cut size is larger than target. Reduce rotor speed or adjust air flow rate.</p>`;
            }
            
            if (results.pressureDrop > targetPressure * 1.2) {
                recommendations += `<p data-en="• Pressure drop exceeds target. Check for blockages or optimize internal design." data-ar="• انخفاض الضغط يتجاوز الهدف. تحقق من الانسدادات أو حسن التصميم الداخلي.">• Pressure drop exceeds target. Check for blockages or optimize internal design.</p>`;
            }
            
            if (results.bypassFactor > 15) {
                recommendations += `<p data-en="• Bypass factor is high. Inspect seals and check for air leaks." data-ar="• عامل التجاوز مرتفع. افحص العوازل وتحقق من تسرب الهواء.">• Bypass factor is high. Inspect seals and check for air leaks.</p>`;
            }
            
            recommendations += '<p data-en="• Ensure proper material distribution at separator inlet." data-ar="• تأكد من التوزيع المناسب للمادة عند مدخل المصنف.">• Ensure proper material distribution at separator inlet.</p>';
            recommendations += '<p data-en="• Regular monitoring of separator performance is recommended." data-ar="• يُنصح بالمراقبة الدورية لأداء المصنف.">• Regular monitoring of separator performance is recommended.</p>';
            recommendations += '<p data-en="• Consider installing pressure monitoring systems for real-time tracking." data-ar="• فكر في تثبيت أنظمة مراقبة الضغط للمتابعة الفورية.">• Consider installing pressure monitoring systems for real-time tracking.</p>';
            
            document.getElementById('design-recommendations-content').innerHTML = recommendations;
        }
        
        // Button event listeners
        document.getElementById('optimize-design-btn').addEventListener('click', function() {
            alert('Design optimization functionality would be implemented here');
        });
        
        document.getElementById('save-design-btn').addEventListener('click', function() {
            localStorage.setItem('separatorDesignData', JSON.stringify({
                projectName: document.getElementById('project-name').value,
                designDate: document.getElementById('design-date').value,
                designerName: document.getElementById('designer-name').value,
                plantCapacity: document.getElementById('plant-capacity').value,
                separatorDiameter: document.getElementById('separator-diameter').value,
                separatorHeight: document.getElementById('separator-height').value,
                airFlowRate: document.getElementById('air-flow-rate').value,
                cutSize: document.getElementById('cut-size').value,
                notes: document.getElementById('design-notes').value
            }));
            alert('Design saved successfully!');
        });
        
        document.getElementById('export-design-btn').addEventListener('click', function() {
            alert('Design export functionality would be implemented here');
        });
        
        document.getElementById('print-design-report').addEventListener('click', function() {
            window.print();
        });
        
        document.getElementById('export-pdf-design').addEventListener('click', function() {
            alert('PDF export functionality would be implemented here');
        });
        
        document.getElementById('new-design').addEventListener('click', function() {
            document.getElementById('results-section').style.display = 'none';
        });
    </script>
    <script src="./common.js"></script>
</body>
</html>