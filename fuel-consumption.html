<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cement Kiln Fuel Consumption Calculator</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Additional custom styles for fuel consumption calculator */
        .kpi-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .kpi-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--primary-color);
        }
        
        .kpi-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .good { color: var(--success-color); }
        .fair { color: var(--warning-color); }
        .poor { color: var(--danger-color); }
        
        .chart-container {
            height: 400px;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }
        
        .recommendations {
            background: #fff9e6;
            border-left: 5px solid var(--warning-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .energy-summary {
            background: #f0f8ff;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .results-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        /* Splash Screen Styles */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
            opacity: 1;
            transition: opacity 1s ease-out;
        }
        
        .splash-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .splash-screen h1 {
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 600;
            text-align: center;
        }
        
        .splash-screen p {
            font-size: 18px;
            font-style: italic;
            text-align: center;
        }
        
        .splash-screen .loader {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-top: 30px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Print Header and Footer */
        .print-header {
            display: none;
        }
        
        .print-footer {
            display: none;
        }
        
        @media print {
            @page {
                size: A4;
                margin: 0.75in;
            }
            
            .print-header, .print-footer {
                display: block;
                position: fixed;
                left: 0;
                right: 0;
                background: white;
                z-index: 100;
                padding: 10px 0.75in;
            }
            
            .print-header {
                top: 0;
                height: 70px;
                border-bottom: 2px solid var(--primary-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-size: 10pt;
            }
            
            .print-footer {
                bottom: 0;
                height: 30px;
                border-top: 1px solid var(--border-color);
                text-align: center;
                font-size: 9pt;
                color: var(--text-secondary);
                line-height: 30px;
            }
            
            body {
                padding-top: 80px;
                padding-bottom: 40px;
                font-size: 12pt;
            }
            
            .no-print {
                display: none !important;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid var(--border-color);
                page-break-inside: avoid;
            }
            
            .chart-container {
                page-break-inside: avoid;
            }
        }
        
        /* Custom styles for this calculator */
        .developer-info {
            background: var(--gradient-primary);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        
        .developer-info h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .developer-info p {
            margin: 5px 0;
            font-size: 14px;
        }
        
        .fuel-parameters {
            background: #e8f4f8;
            border-left: 5px solid #007acc;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div>
            <h1 data-en="Cement Kiln Fuel Consumption Calculator" data-ar="حاسبة استهلاك الوقود لأفران الأسمنت">Cement Kiln Fuel Consumption Calculator</h1>
            <p data-en="Developed by: Mr. Fadi M. Darwesh" data-ar="تطوير: السيد فادي م. درويش">Developed by: Mr. Fadi M. Darwesh</p>
            <p data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</p>
            <p data-en="asrar.cement@gmail.com" data-ar="asrar.cement@gmail.com">asrar.cement@gmail.com</p>
            <div class="loader"></div>
        </div>
    </div>

    <!-- Print Header -->
    <div class="print-header">
        <div>
            <strong data-en="Cement Kiln Fuel Consumption Calculator" data-ar="حاسبة استهلاك الوقود لأفران الأسمنت">Cement Kiln Fuel Consumption Calculator</strong>
        </div>
        <div>
            <strong data-en="Fuel Consumption Report" data-ar="تقرير استهلاك الوقود">Fuel Consumption Report</strong>
        </div>
    </div>

    <!-- Print Footer -->
    <div class="print-footer">
        <span data-en="Mr. Fadi M. Darwesh - QC & R&D Specialist - asrar.cement@gmail.com" data-ar="السيد فادي م. درويش - أخصائي ضمان الجودة والبحوث والتطوير - asrar.cement@gmail.com">Mr. Fadi M. Darwesh - QC & R&D Specialist - asrar.cement@gmail.com</span>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header no-print">
            <div class="header-content">
                <div class="logo">
                    <h1 data-en="Cement Kiln Fuel Consumption Calculator" data-ar="حاسبة استهلاك الوقود لأفران الأسمنت">Cement Kiln Fuel Consumption Calculator</h1>
                </div>
                <div class="header-controls">
                    <div class="language-switch">
                        <button class="lang-btn active" id="lang-en">English</button>
                        <button class="lang-btn" id="lang-ar">العربية</button>
                    </div>
                </div>
            </div>
        <a href="index.html" class="back-btn" style="position: fixed; top: 20px; right: 20px; background: var(--secondary); color: white; padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s; z-index: 100;"><i class="fas fa-arrow-right"></i>العودة للرئيسية</a>
</header>

        <div class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h2 data-en="Advanced Fuel Consumption Calculator" data-ar="حاسبة استهلاك الوقود المتقدمة">Advanced Fuel Consumption Calculator</h2>
                    <p data-en="Comprehensive calculation tool for cement kiln fuel consumption using engineering principles and industry standards" data-ar="أداة حساب شاملة لاستهلاك وقود أفران الأسمنت باستخدام المبادئ الهندسية ومعايير الصناعة">Comprehensive calculation tool for cement kiln fuel consumption using engineering principles and industry standards</p>
                </div>
            </section>

            <!-- Company & Report Information -->
            <div class="card">
                <h2 class="section-title" data-en="Project Information" data-ar="معلومات المشروع">Project Information</h2>
                <div class="grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="project-name" data-en="Project Name" data-ar="اسم المشروع">Project Name</label>
                        <input type="text" id="project-name" placeholder="Enter project name">
                    </div>
                    <div class="input-group">
                        <label for="design-date" data-en="Design Date" data-ar="تاريخ التصميم">Design Date</label>
                        <input type="date" id="design-date">
                    </div>
                    <div class="input-group">
                        <label for="designer-name" data-en="Designed By" data-ar="المصمم">Designed By</label>
                        <input type="text" id="designer-name" placeholder="Enter designer name">
                    </div>
                    <div class="input-group">
                        <label for="designer-position" data-en="Designer Position" data-ar="منصب المصمم">Designer Position</label>
                        <input type="text" id="designer-position" placeholder="Enter designer position">
                    </div>
                    <div class="input-group">
                        <label for="kiln-type" data-en="Kiln Type" data-ar="نوع الفرن">Kiln Type</label>
                        <select id="kiln-type">
                            <option value="wet" data-en="Wet Process" data-ar="العملية الرطبة">Wet Process</option>
                            <option value="dry" data-en="Dry Process" data-ar="العملية الجافة">Dry Process</option>
                            <option value="semi-dry" data-en="Semi-Dry Process" data-ar="العملية شبه الجافة">Semi-Dry Process</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="fuel-cost" data-en="Fuel Cost ($/ton)" data-ar="تكلفة الوقود (دولار/طن)">Fuel Cost ($/ton)</label>
                        <input type="number" step="0.01" id="fuel-cost" placeholder="e.g., 0.08">
                    </div>
                </div>
            </div>

            <!-- Fuel Consumption Parameters -->
            <div class="card">
                <h2 class="section-title" data-en="Fuel Consumption Parameters" data-ar="معاملات استهلاك الوقود">Fuel Consumption Parameters</h2>
                <div class="grid-3" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="kiln-production" data-en="Kiln Production Rate (t/day)" data-ar="معدل إنتاج الفرن (طن/يوم)">Kiln Production Rate (t/day)</label>
                        <input type="number" step="1" id="kiln-production" placeholder="Enter production rate">
                    </div>
                    <div class="input-group">
                        <label for="clinker-temp" data-en="Clinker Temperature (°C)" data-ar="درجة حرارة الكلنكر (°م)">Clinker Temperature (°C)</label>
                        <input type="number" step="1" id="clinker-temp" placeholder="Enter temperature">
                    </div>
                    <div class="input-group">
                        <label for="fuel-type" data-en="Fuel Type" data-ar="نوع الوقود">Fuel Type</label>
                        <select id="fuel-type">
                            <option value="" data-en="Select Fuel Type" data-ar="اختر نوع الوقود">Select Fuel Type</option>
                            <option value="coal" data-en="Coal" data-ar="فحم">Coal</option>
                            <option value="petcoke" data-en="Petroleum Coke" data-ar="كوك البترول">Petroleum Coke</option>
                            <option value="natural-gas" data-en="Natural Gas" data-ar="غاز طبيعي">Natural Gas</option>
                            <option value="heavy-fuel" data-en="Heavy Fuel Oil" data-ar="زيت وقود ثقيل">Heavy Fuel Oil</option>
                            <option value="alternative" data-en="Alternative Fuel" data-ar="وقود بديل">Alternative Fuel</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="calorific-value" data-en="Fuel Calorific Value (kcal/kg)" data-ar="القيمة الحرارية للوقود (كيلوكالوري/كيلوجرام)">Fuel Calorific Value (kcal/kg)</label>
                        <input type="number" step="10" id="calorific-value" placeholder="Enter calorific value">
                    </div>
                    <div class="input-group">
                        <label for="kiln-efficiency" data-en="Kiln Efficiency (%)" data-ar="كفاءة الفرن (%)">Kiln Efficiency (%)</label>
                        <input type="number" step="0.1" id="kiln-efficiency" placeholder="Enter efficiency">
                    </div>
                    <div class="input-group">
                        <label for="preheater-efficiency" data-en="Preheater Efficiency (%)" data-ar="كفاءة ما قبل التسخين (%)">Preheater Efficiency (%)</label>
                        <input type="number" step="0.1" id="preheater-efficiency" placeholder="Enter efficiency">
                    </div>
                </div>
            </div>

            <!-- Target Settings -->
            <div class="card">
                <h2 class="section-title" data-en="Target Settings" data-ar="الإعدادات المستهدفة">Target Settings</h2>
                <div class="grid-3" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="input-group">
                        <label for="target-fuel-consumption" data-en="Target Fuel Consumption (kcal/kg)" data-ar="هدف استهلاك الوقود (كيلوكالوري/كيلوجرام)">Target Fuel Consumption (kcal/kg)</label>
                        <input type="number" step="1" id="target-fuel-consumption" value="750">
                    </div>
                    <div class="input-group">
                        <label for="target-co2-emission" data-en="CO2 Emission Target (kg/ton)" data-ar="هدف انبعاثات ثاني أكسيد الكربون (كيلوجرام/طن)">CO2 Emission Target (kg/ton)</label>
                        <input type="number" step="1" id="target-co2-emission" value="800">
                    </div>
                    <div class="input-group">
                        <label for="efficiency-improvement-goal" data-en="Efficiency Improvement Goal (%)" data-ar="هدف تحسين الكفاءة (%)">Efficiency Improvement Goal (%)</label>
                        <input type="number" step="0.1" id="efficiency-improvement-goal" value="5">
                    </div>
                </div>
            </div>

            <!-- Fuel Analysis Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Fuel Analysis" data-ar="تحليل الوقود">Fuel Analysis</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Parameter" data-ar="المعامل">Parameter</th>
                            <th data-en="Value" data-ar="القيمة">Value</th>
                            <th data-en="Unit" data-ar="الوحدة">Unit</th>
                            <th data-en="Typical Range" data-ar="النطاق المعتاد">Typical Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Fixed Carbon" data-ar="الكربون الثابت">Fixed Carbon</td>
                            <td id="fixed-carbon">-</td>
                            <td>%</td>
                            <td data-en="40-85" data-ar="40-85">40-85</td>
                        </tr>
                        <tr>
                            <td data-en="Volatile Matter" data-ar="المواد المتطايرة">Volatile Matter</td>
                            <td id="volatile-matter">-</td>
                            <td>%</td>
                            <td data-en="5-40" data-ar="5-40">5-40</td>
                        </tr>
                        <tr>
                            <td data-en="Ash Content" data-ar="محتوى الرماد">Ash Content</td>
                            <td id="ash-content">-</td>
                            <td>%</td>
                            <td data-en="5-20" data-ar="5-20">5-20</td>
                        </tr>
                        <tr>
                            <td data-en="Moisture Content" data-ar="محتوى الرطوبة">Moisture Content</td>
                            <td id="moisture-content">-</td>
                            <td>%</td>
                            <td data-en="1-10" data-ar="1-10">1-10</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Operating Conditions Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Operating Conditions" data-ar="ظروف التشغيل">Operating Conditions</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Parameter" data-ar="المعامل">Parameter</th>
                            <th data-en="Current Value" data-ar="القيمة الحالية">Current Value</th>
                            <th data-en="Target Value" data-ar="القيمة المستهدفة">Target Value</th>
                            <th data-en="Status" data-ar="الحالة">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Kiln Inlet Temperature" data-ar="درجة حرارة مدخل الفرن">Kiln Inlet Temperature</td>
                            <td id="current-inlet-temp">-</td>
                            <td data-en="1100-1200°C" data-ar="1100-1200°م">1100-1200°C</td>
                            <td id="inlet-temp-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Secondary Air Temperature" data-ar="درجة حرارة الهواء الثانوي">Secondary Air Temperature</td>
                            <td id="current-secondary-temp">-</td>
                            <td data-en="800-1000°C" data-ar="800-1000°م">800-1000°C</td>
                            <td id="secondary-temp-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Oxygen Content" data-ar="محتوى الأكسجين">Oxygen Content</td>
                            <td id="current-oxygen">-</td>
                            <td data-en="2-4%" data-ar="2-4%">2-4%</td>
                            <td id="oxygen-status">-</td>
                        </tr>
                        <tr>
                            <td data-en="Excess Air Ratio" data-ar="نسبة الهواء الزائد">Excess Air Ratio</td>
                            <td id="current-excess-air">-</td>
                            <td data-en="1.05-1.15" data-ar="1.05-1.15">1.05-1.15</td>
                            <td id="excess-air-status">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Energy Balance Data Table -->
            <div class="card">
                <h2 class="section-title" data-en="Energy Balance" data-ar="موازنة الطاقة">Energy Balance</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-en="Energy Component" data-ar="مكون الطاقة">Energy Component</th>
                            <th data-en="Value" data-ar="القيمة">Value</th>
                            <th data-en="Unit" data-ar="الوحدة">Unit</th>
                            <th data-en="Percentage" data-ar="النسبة المئوية">Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-en="Heat for Clinker Formation" data-ar="الحرارة لتكوين الكلنكر">Heat for Clinker Formation</td>
                            <td id="clinker-heat">-</td>
                            <td>kcal/kg</td>
                            <td id="clinker-heat-pct">-</td>
                        </tr>
                        <tr>
                            <td data-en="Heat Losses" data-ar="فقدان الحرارة">Heat Losses</td>
                            <td id="heat-losses">-</td>
                            <td>kcal/kg</td>
                            <td id="heat-losses-pct">-</td>
                        </tr>
                        <tr>
                            <td data-en="Preheater Recovery" data-ar="استرداد ما قبل التسخين">Preheater Recovery</td>
                            <td id="preheater-recovery">-</td>
                            <td>kcal/kg</td>
                            <td id="preheater-recovery-pct">-</td>
                        </tr>
                        <tr>
                            <td data-en="Total Energy Input" data-ar="إجمالي مدخلات الطاقة">Total Energy Input</td>
                            <td id="total-energy">-</td>
                            <td>kcal/kg</td>
                            <td>100%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="button-group">
                    <button class="btn btn-primary" id="calculate-consumption-btn" data-en="Calculate Consumption" data-ar="حساب الاستهلاك">Calculate Consumption</button>
                    <button class="btn btn-secondary" id="optimize-consumption-btn" data-en="Optimize Consumption" data-ar="تحسين الاستهلاك">Optimize Consumption</button>
                    <button class="btn btn-success" id="save-consumption-btn" data-en="Save Calculation" data-ar="حفظ الحساب">Save Calculation</button>
                    <button class="btn btn-warning" id="export-consumption-btn" data-en="Export Calculation" data-ar="تصدير الحساب">Export Calculation</button>
                </div>
            </div>

            <!-- Additional Notes -->
            <div class="card">
                <h2 class="section-title" data-en="Calculation Notes" data-ar="ملاحظات الحساب">Calculation Notes</h2>
                <div class="input-group">
                    <label for="calculation-notes" data-en="Add your calculation notes and specifications:" data-ar="أضف ملاحظاتك ومواصفات الحساب:">Add your calculation notes and specifications:</label>
                    <textarea id="calculation-notes" rows="4" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; font-family: var(--font-arabic);" placeholder="Enter calculation notes, fuel specifications, operating conditions..."></textarea>
                </div>
                <small style="color: var(--text-secondary);" data-en="These notes will be included in the calculation report" data-ar="ستظهر هذه الملاحظات في تقرير الحساب">These notes will be included in the calculation report</small>
            </div>
            
            <!-- Results Section -->
            <div class="results-section" id="results-section">
                <div class="card">
                    <h2 class="section-title" data-en="Fuel Consumption Results" data-ar="نتائج استهلاك الوقود">Fuel Consumption Results</h2>
                    
                    <div class="grid-4" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- KPI Cards -->
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Specific Fuel Consumption" data-ar="استهلاك الوقود النوعي">Specific Fuel Consumption</div>
                            <div class="kpi-value" id="fuel-consumption-kpi">-</div>
                            <div class="kpi-label" id="fuel-consumption-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="CO2 Emissions" data-ar="انبعاثات ثاني أكسيد الكربون">CO2 Emissions</div>
                            <div class="kpi-value" id="co2-emissions-kpi">-</div>
                            <div class="kpi-label" id="co2-emissions-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Fuel Cost" data-ar="تكلفة الوقود">Fuel Cost</div>
                            <div class="kpi-value" id="fuel-cost-kpi">-</div>
                            <div class="kpi-label" id="fuel-cost-status">-</div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-label" data-en="Energy Efficiency" data-ar="كفاءة الطاقة">Energy Efficiency</div>
                            <div class="kpi-value" id="energy-efficiency-kpi">-</div>
                            <div class="kpi-label" id="energy-efficiency-status">-</div>
                        </div>
                    </div>
                    
                    <!-- Charts -->
                    <div class="chart-container">
                        <canvas id="fuel-consumption-chart"></canvas>
                    </div>
                    
                    <!-- Energy Summary -->
                    <div class="energy-summary">
                        <h3 class="section-heading" data-en="Energy Balance Summary" data-ar="ملخص موازنة الطاقة">Energy Balance Summary</h3>
                        <div id="energy-summary-content">
                            <p data-en="Fuel consumption calculation completed. Review the results above." data-ar="تم إكمال حساب استهلاك الوقود. راجع النتائج أعلاه.">Fuel consumption calculation completed. Review the results above.</p>
                        </div>
                    </div>
                    
                    <!-- Recommendations -->
                    <div class="recommendations">
                        <h3 class="section-heading" data-en="Optimization Recommendations" data-ar="توصيات التحسين">Optimization Recommendations</h3>
                        <div id="optimization-recommendations-content"></div>
                    </div>
                    
                    <div class="button-group no-print">
                        <button class="btn btn-success" id="print-consumption-report" data-en="Print Report" data-ar="طباعة التقرير">Print Report</button>
                        <button class="btn btn-warning" id="export-pdf-consumption" data-ar="تصدير كـ PDF" data-en="Export as PDF">Export as PDF</button>
                        <button class="btn btn-secondary" id="new-calculation" data-en="New Calculation" data-ar="حساب جديد">New Calculation</button>
                    </div>
                </div>
            </div>

            <!-- Developer Information -->
            <div class="developer-info no-print">
                <h3 data-en="System Developer" data-ar="مطور النظام">System Developer</h3>
                <p><strong data-en="Mr. Fadi M. Darwesh" data-ar="السيد فادي م. درويش">Mr. Fadi M. Darwesh</strong></p>
                <p data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</p>
                <p>asrar.cement@gmail.com</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer no-print">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 data-en="Cement Kiln Fuel Consumption Calculator" data-ar="حاسبة استهلاك الوقود لأفران الأسمنت">Cement Kiln Fuel Consumption Calculator</h4>
                    <p data-en="Advanced calculation tools for cement kiln fuel consumption engineering" data-ar="أدوات حساب متقدمة لهندسة استهلاك وقود أفران الأسمنت">Advanced calculation tools for cement kiln fuel consumption engineering</p>
                </div>
                <div class="footer-section">
                    <h4 data-en="Developer" data-ar="المطور">Developer</h4>
                    <ul>
                        <li>Mr. Fadi M. Darwesh</li>
                        <li data-en="QC & R&D Specialist" data-ar="أخصائي ضمان الجودة والبحوث والتطوير">QC & R&D Specialist</li>
                        <li>asrar.cement@gmail.com</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-en="Features" data-ar="المميزات">Features</h4>
                    <ul>
                        <li data-en="Fuel Consumption Calculation" data-ar="حساب استهلاك الوقود">Fuel Consumption Calculation</li>
                        <li data-en="CO2 Emissions Analysis" data-ar="تحليل انبعاثات ثاني أكسيد الكربون">CO2 Emissions Analysis</li>
                        <li data-en="Energy Balance" data-ar="موازنة الطاقة">Energy Balance</li>
                        <li data-en="Optimization Tools" data-ar="أدوات التحسين">Optimization Tools</li>
                    </ul>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--gray-700);">
                <p data-en="© 2025 Fuel Consumption Calculator System. All rights reserved." data-ar="© 2025 نظام حاسبة استهلاك الوقود. جميع الحقوق محفوظة.">© 2025 Fuel Consumption Calculator System. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <i class="fas fa-cog"></i>
            <p data-en="Calculating Consumption..." data-ar="جاري حساب الاستهلاك...">Calculating Consumption...</p>
        </div>
    </div>

    <script>
        // Language switching functionality
        document.getElementById('lang-en').addEventListener('click', function() {
            setLanguage('en');
        });
        
        document.getElementById('lang-ar').addEventListener('click', function() {
            setLanguage('ar');
        });
        
        function setLanguage(lang) {
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Update text content based on data attributes
            document.querySelectorAll('[data-en]').forEach(element => {
                if (lang === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-ar');
                }
            });
            
            // Update placeholders
            document.querySelectorAll('input[placeholder], textarea[placeholder]').forEach(element => {
                const enText = element.getAttribute('data-en-placeholder');
                const arText = element.getAttribute('data-ar-placeholder');
                
                if (enText && arText) {
                    element.placeholder = lang === 'en' ? enText : arText;
                }
            });
            
            // Update direction
            document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        }
        
        // Initialize with English
        setLanguage('en');
        
        // Initialize splash screen
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('splash-screen').classList.add('hidden');
            }, 2000);
            
            // Set current date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('design-date').value = today;
        });

        function setStatusIndicator(metric, value, target, lowerIsBetter = false) {
            const statusElement = document.getElementById(`${metric}-status`);
            let status, statusClass;
            
            if (value === null || typeof value === 'undefined' || isNaN(value)) {
                statusElement.textContent = 'N/A';
                statusElement.className = 'kpi-label';
                return;
            }

            const deviation = Math.abs(value - target) / target * 100;
            
            if (deviation <= 5) {
                status = 'Good';
                statusClass = 'good';
            } else if (deviation <= 10) {
                status = 'Fair';
                statusClass = 'fair';
            } else {
                status = 'Poor';
                statusClass = 'poor';
            }
            
            statusElement.textContent = status;
            statusElement.className = 'kpi-label ' + statusClass;
        }

        // Calculate consumption
        document.getElementById('calculate-consumption-btn').addEventListener('click', function() {
            calculateConsumption();
        });

        function calculateConsumption() {
            // Get input values
            const production = parseFloat(document.getElementById('kiln-production').value);
            const clinkerTemp = parseFloat(document.getElementById('clinker-temp').value);
            const fuelType = document.getElementById('fuel-type').value;
            const calorificValue = parseFloat(document.getElementById('calorific-value').value);
            const kilnEfficiency = parseFloat(document.getElementById('kiln-efficiency').value);
            const preheaterEfficiency = parseFloat(document.getElementById('preheater-efficiency').value);
            
            if (isNaN(production) || isNaN(clinkerTemp) || isNaN(calorificValue) || isNaN(kilnEfficiency) || isNaN(preheaterEfficiency)) {
                alert('Please enter all required fuel consumption parameters!');
                return;
            }
            
            // Show loading
            document.getElementById('loading-overlay').classList.remove('hidden');
            
            // Simulate calculation delay
            setTimeout(() => {
                const results = performConsumptionCalculations(production, clinkerTemp, fuelType, calorificValue, kilnEfficiency, preheaterEfficiency);
                
                document.getElementById('loading-overlay').classList.add('hidden');
                displayConsumptionResults(results);
                document.getElementById('results-section').style.display = 'block';
            }, 1000);
        }

        function performConsumptionCalculations(production, clinkerTemp, fuelType, calorificValue, kilnEfficiency, preheaterEfficiency) {
            // Theoretical heat requirement for clinker formation (approx 400-500 kcal/kg)
            const theoreticalHeat = 450;
            
            // Heat losses (stack, radiation, etc.) - typically 15-25%
            const heatLosses = 0.2;
            
            // Preheater recovery efficiency
            const preheaterRecovery = preheaterEfficiency / 100;
            
            // Kiln efficiency factor
            const kilnEffFactor = kilnEfficiency / 100;
            
            // Calculate specific fuel consumption
            const specificConsumption = (theoreticalHeat * (1 + heatLosses) * (1 - preheaterRecovery)) / (calorificValue * kilnEffFactor);
            
            // Total energy input
            const totalEnergy = specificConsumption * calorificValue;
            
            // Heat for clinker formation
            const clinkerHeat = theoreticalHeat * production * 1000 / 1000; // kcal/kg
            
            // Actual heat losses
            const actualHeatLosses = totalEnergy * heatLosses;
            
            // Preheater recovered heat
            const recoveredHeat = totalEnergy * preheaterRecovery;
            
            // CO2 emissions calculation (approx 0.3 kg CO2 per kg fuel for coal)
            const co2Factor = fuelType === 'coal' ? 0.3 : fuelType === 'petcoke' ? 0.32 : fuelType === 'natural-gas' ? 0.2 : 0.25;
            const co2Emissions = specificConsumption * co2Factor * 1000 / 1000; // kg/ton clinker
            
            // Fuel cost calculation
            const fuelCost = parseFloat(document.getElementById('fuel-cost').value) || 0.08;
            const fuelConsumptionCost = specificConsumption * fuelCost;
            
            // Operating parameters
            const kilnInletTemp = 1100 + (clinkerTemp - 1400) * 0.1;
            const secondaryAirTemp = 850 + (clinkerTemp - 1400) * 0.05;
            const oxygenContent = 3 - (kilnEfficiency - 80) * 0.1;
            const excessAirRatio = 1.1 - (kilnEfficiency - 80) * 0.002;
            
            // Fuel analysis based on type
            const fuelAnalysis = getFuelAnalysis(fuelType);
            
            return {
                specificConsumption,
                totalEnergy,
                clinkerHeat,
                actualHeatLosses,
                recoveredHeat,
                co2Emissions,
                fuelCost: fuelConsumptionCost,
                energyEfficiency: kilnEfficiency,
                kilnInletTemp,
                secondaryAirTemp,
                oxygenContent,
                excessAirRatio,
                fuelAnalysis,
                production,
                clinkerTemp,
                calorificValue,
                kilnEfficiency,
                preheaterEfficiency
            };
        }

        function getFuelAnalysis(fuelType) {
            switch(fuelType) {
                case 'coal':
                    return { fixedCarbon: 65, volatileMatter: 25, ashContent: 8, moistureContent: 2 };
                case 'petcoke':
                    return { fixedCarbon: 85, volatileMatter: 10, ashContent: 3, moistureContent: 2 };
                case 'natural-gas':
                    return { fixedCarbon: 0, volatileMatter: 100, ashContent: 0, moistureContent: 0 };
                case 'heavy-fuel':
                    return { fixedCarbon: 80, volatileMatter: 15, ashContent: 3, moistureContent: 2 };
                default:
                    return { fixedCarbon: 60, volatileMatter: 30, ashContent: 8, moistureContent: 2 };
            }
        }

        function displayConsumptionResults(results) {
            // Update KPI cards
            document.getElementById('fuel-consumption-kpi').textContent = results.specificConsumption.toFixed(1) + ' kcal/kg';
            document.getElementById('co2-emissions-kpi').textContent = results.co2Emissions.toFixed(1) + ' kg/ton';
            document.getElementById('fuel-cost-kpi').textContent = '$' + results.fuelCost.toFixed(2) + '/ton';
            document.getElementById('energy-efficiency-kpi').textContent = results.energyEfficiency.toFixed(1) + '%';
            
            // Set status indicators
            const targetFuel = parseFloat(document.getElementById('target-fuel-consumption').value) || 750;
            const targetCO2 = parseFloat(document.getElementById('target-co2-emission').value) || 800;
            
            setStatusIndicator('fuel-consumption', results.specificConsumption, targetFuel, true);
            setStatusIndicator('co2-emissions', results.co2Emissions, targetCO2, true);
            setStatusIndicator('fuel-cost', results.fuelCost, targetFuel * 0.08, true);
            setStatusIndicator('energy-efficiency', results.energyEfficiency, 85);
            
            // Update fuel analysis table
            document.getElementById('fixed-carbon').textContent = results.fuelAnalysis.fixedCarbon;
            document.getElementById('volatile-matter').textContent = results.fuelAnalysis.volatileMatter;
            document.getElementById('ash-content').textContent = results.fuelAnalysis.ashContent;
            document.getElementById('moisture-content').textContent = results.fuelAnalysis.moistureContent;
            
            // Update operating conditions table
            document.getElementById('current-inlet-temp').textContent = Math.round(results.kilnInletTemp) + '°C';
            document.getElementById('current-secondary-temp').textContent = Math.round(results.secondaryAirTemp) + '°C';
            document.getElementById('current-oxygen').textContent = results.oxygenContent.toFixed(1) + '%';
            document.getElementById('current-excess-air').textContent = results.excessAirRatio.toFixed(2);
            
            // Set operating condition statuses
            setStatusIndicator('inlet-temp', results.kilnInletTemp, 1150);
            setStatusIndicator('secondary-temp', results.secondaryAirTemp, 900);
            setStatusIndicator('oxygen', results.oxygenContent, 3);
            setStatusIndicator('excess-air', results.excessAirRatio, 1.1);
            
            // Update energy balance table
            document.getElementById('clinker-heat').textContent = results.clinkerHeat.toFixed(1);
            document.getElementById('heat-losses').textContent = results.actualHeatLosses.toFixed(1);
            document.getElementById('preheater-recovery').textContent = results.recoveredHeat.toFixed(1);
            document.getElementById('total-energy').textContent = results.totalEnergy.toFixed(1);
            
            // Calculate percentages
            document.getElementById('clinker-heat-pct').textContent = (results.clinkerHeat / results.totalEnergy * 100).toFixed(1) + '%';
            document.getElementById('heat-losses-pct').textContent = (results.actualHeatLosses / results.totalEnergy * 100).toFixed(1) + '%';
            document.getElementById('preheater-recovery-pct').textContent = (results.recoveredHeat / results.totalEnergy * 100).toFixed(1) + '%';
            
            generateConsumptionChart(results);
            generateEnergySummary(results);
            generateOptimizationRecommendations(results);
        }

        function generateConsumptionChart(results) {
            const ctx = document.getElementById('fuel-consumption-chart').getContext('2d');
            
            if (window.fuelConsumptionChart) {
                window.fuelConsumptionChart.destroy();
            }
            
            // Generate production rate data vs fuel consumption
            const productionRates = [];
            const consumptions = [];
            for (let rate = results.production * 0.5; rate <= results.production * 1.5; rate += results.production * 0.1) {
                productionRates.push(Math.round(rate));
                // Calculate fuel consumption based on production rate (economies of scale)
                const consumption = results.specificConsumption * Math.pow(results.production / rate, 0.1);
                consumptions.push(consumption);
            }
            
            window.fuelConsumptionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: productionRates,
                    datasets: [{
                        label: 'Fuel Consumption',
                        data: consumptions,
                        borderColor: 'rgba(37, 99, 235, 1)',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Production Rate (t/day)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Fuel Consumption (kcal/kg)'
                            },
                            min: Math.min(...consumptions) * 0.9,
                            max: Math.max(...consumptions) * 1.1
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Fuel Consumption vs Production Rate'
                        }
                    }
                }
            });
        }

        function generateEnergySummary(results) {
            let summary = '';
            
            summary += `<p data-en="• Specific fuel consumption: ${results.specificConsumption.toFixed(1)} kcal/kg clinker" data-ar="• استهلاك الوقود النوعي: ${results.specificConsumption.toFixed(1)} كيلوكالوري/كيلوجرام كلنكر">• Specific fuel consumption: ${results.specificConsumption.toFixed(1)} kcal/kg clinker</p>`;
            summary += `<p data-en="• Total energy input: ${results.totalEnergy.toFixed(1)} kcal/kg" data-ar="• إجمالي مدخلات الطاقة: ${results.totalEnergy.toFixed(1)} كيلوكالوري/كيلوجرام">• Total energy input: ${results.totalEnergy.toFixed(1)} kcal/kg</p>`;
            summary += `<p data-en="• Heat for clinker formation: ${results.clinkerHeat.toFixed(1)} kcal/kg (${(results.clinkerHeat/results.totalEnergy*100).toFixed(1)}%)" data-ar="• الحرارة لتكوين الكلنكر: ${results.clinkerHeat.toFixed(1)} كيلوكالوري/كيلوجرام (${(results.clinkerHeat/results.totalEnergy*100).toFixed(1)}%)">• Heat for clinker formation: ${results.clinkerHeat.toFixed(1)} kcal/kg (${(results.clinkerHeat/results.totalEnergy*100).toFixed(1)}%)</p>`;
            summary += `<p data-en="• Heat losses: ${results.actualHeatLosses.toFixed(1)} kcal/kg (${(results.actualHeatLosses/results.totalEnergy*100).toFixed(1)}%)" data-ar="• فقدان الحرارة: ${results.actualHeatLosses.toFixed(1)} كيلوكالوري/كيلوجرام (${(results.actualHeatLosses/results.totalEnergy*100).toFixed(1)}%)">• Heat losses: ${results.actualHeatLosses.toFixed(1)} kcal/kg (${(results.actualHeatLosses/results.totalEnergy*100).toFixed(1)}%)</p>`;
            summary += `<p data-en="• Preheater recovery: ${results.recoveredHeat.toFixed(1)} kcal/kg (${(results.recoveredHeat/results.totalEnergy*100).toFixed(1)}%)" data-ar="• استرداد ما قبل التسخين: ${results.recoveredHeat.toFixed(1)} كيلوكالوري/كيلوجرام (${(results.recoveredHeat/results.totalEnergy*100).toFixed(1)}%)">• Preheater recovery: ${results.recoveredHeat.toFixed(1)} kcal/kg (${(results.recoveredHeat/results.totalEnergy*100).toFixed(1)}%)</p>`;
            summary += `<p data-en="• CO2 emissions: ${results.co2Emissions.toFixed(1)} kg/ton clinker" data-ar="• انبعاثات ثاني أكسيد الكربون: ${results.co2Emissions.toFixed(1)} كيلوجرام/طن كلنكر">• CO2 emissions: ${results.co2Emissions.toFixed(1)} kg/ton clinker</p>`;
            
            document.getElementById('energy-summary-content').innerHTML = summary;
        }

        function generateOptimizationRecommendations(results) {
            let recommendations = '';
            
            const targetFuel = parseFloat(document.getElementById('target-fuel-consumption').value) || 750;
            const targetCO2 = parseFloat(document.getElementById('target-co2-emission').value) || 800;
            
            if (results.specificConsumption > targetFuel * 1.1) {
                recommendations += `<p data-en="• Fuel consumption is above target. Consider improving kiln insulation and optimizing combustion." data-ar="• استهلاك الوقود أعلى من الهدف. فكر في تحسين عزل الفرن وتحسين الاحتراق.">• Fuel consumption is above target. Consider improving kiln insulation and optimizing combustion.</p>`;
            }
            
            if (results.co2Emissions > targetCO2 * 1.1) {
                recommendations += `<p data-en="• CO2 emissions exceed target. Consider using alternative fuels or improving combustion efficiency." data-ar="• انبعاثات ثاني أكسيد الكربون تتجاوز الهدف. فكر في استخدام وقود بديل أو تحسين كفاءة الاحتراق.">• CO2 emissions exceed target. Consider using alternative fuels or improving combustion efficiency.</p>`;
            }
            
            if (results.energyEfficiency < 80) {
                recommendations += `<p data-en="• Energy efficiency is below optimal. Check for air leakages and optimize kiln operation." data-ar="• كفاءة الطاقة أقل من الأمثل. تحقق من تسرب الهواء وحسن تشغيل الفرن.">• Energy efficiency is below optimal. Check for air leakages and optimize kiln operation.</p>`;
            }
            
            if (results.actualHeatLosses / results.totalEnergy > 0.25) {
                recommendations += `<p data-en="• High heat losses detected. Inspect refractory lining and optimize waste heat recovery." data-ar="• تم اكتشاف فقد حراري عالي. افحص بطانة الحراريات وحسن استرداد الحرارة المهدورة.">• High heat losses detected. Inspect refractory lining and optimize waste heat recovery.</p>`;
            }
            
            recommendations += '<p data-en="• Regular monitoring of fuel consumption is recommended for optimization." data-ar="• يُنصح بالمراقبة الدورية لاستهلاك الوقود للتحسين.">• Regular monitoring of fuel consumption is recommended for optimization.</p>';
            recommendations += '<p data-en="• Consider implementing advanced process control systems." data-ar="• فكر في تنفيذ أنظمة التحكم المتقدمة في العمليات.">• Consider implementing advanced process control systems.</p>';
            recommendations += '<p data-en="• Maintain optimal preheater efficiency for maximum heat recovery." data-ar="• حافظ على كفاءة مثالية لما قبل التسخين لاسترداد حرارة قصوى.">• Maintain optimal preheater efficiency for maximum heat recovery.</p>';
            
            document.getElementById('optimization-recommendations-content').innerHTML = recommendations;
        }
        
        // Button event listeners
        document.getElementById('optimize-consumption-btn').addEventListener('click', function() {
            alert('Consumption optimization functionality would be implemented here');
        });
        
        document.getElementById('save-consumption-btn').addEventListener('click', function() {
            localStorage.setItem('fuelConsumptionData', JSON.stringify({
                projectName: document.getElementById('project-name').value,
                designDate: document.getElementById('design-date').value,
                designerName: document.getElementById('designer-name').value,
                kilnType: document.getElementById('kiln-type').value,
                fuelCost: document.getElementById('fuel-cost').value,
                kilnProduction: document.getElementById('kiln-production').value,
                clinkerTemp: document.getElementById('clinker-temp').value,
                fuelType: document.getElementById('fuel-type').value,
                calorificValue: document.getElementById('calorific-value').value,
                kilnEfficiency: document.getElementById('kiln-efficiency').value,
                preheaterEfficiency: document.getElementById('preheater-efficiency').value,
                notes: document.getElementById('calculation-notes').value
            }));
            alert('Calculation saved successfully!');
        });
        
        document.getElementById('export-consumption-btn').addEventListener('click', function() {
            alert('Calculation export functionality would be implemented here');
        });
        
        document.getElementById('print-consumption-report').addEventListener('click', function() {
            window.print();
        });
        
        document.getElementById('export-pdf-consumption').addEventListener('click', function() {
            alert('PDF export functionality would be implemented here');
        });
        
        document.getElementById('new-calculation').addEventListener('click', function() {
            document.getElementById('results-section').style.display = 'none';
        });
    </script>
    <script src="./common.js"></script>
</body>
</html>